{"version":3,"sources":["components/Dropdown.js","helpers/timeFunctions.js","components/Form.js","App.js","index.js"],"names":["Dropdown","label","selected","options","onSelectedChange","generatedList","length","map","option","value","onChange","className","aria-label","getFormattedDate","date","Date","now","d","month","getMonth","day","getDate","year","getFullYear","join","getFormattedTime","minutes","getMinutes","hours","getHours","Form","props","areas","machines","operators","getAreasFromList","Set","machinesList","item","machine_location","forEach","value1","value2","set","push","setState","currentArea","getMachinesFromList","area","filter","machine_name","currentMachine","getOperatorsFromList","operatorsList","name","machine_operator","currentOperator","getEpoch","state","selectedDate","selectedTime","getTime","handleAreaChange","event","stateProperty","target","handleChange","handleFormSubmission","onFormSubmit","machine","epochMilliSeconds","operator","activity","maintenanceActivity","preventDefault","this","onFormMount","timeStep","prevProps","onSubmit","htmlFor","id","type","placeholder","style","height","React","Component","App","error","fetchOperationData","endPoint","a","axios","get","response","data","serverError","fetchDropdownData","areaAndMachines","postFormData","console","log","post","alert","renderForm","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.ee1b6716.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Dropdown = ({ label, selected, options, onSelectedChange }) => {\r\n  const generatedList =\r\n    options.length > 0\r\n      ? options.map((option) => {\r\n          return (\r\n            <option key={option.value} value={option.value}>\r\n              {option.label}\r\n            </option>\r\n          );\r\n        })\r\n      : null;\r\n\r\n  return (\r\n    <div>\r\n      <label>{label}</label>\r\n      <select\r\n        value={selected.value}\r\n        onChange={onSelectedChange}\r\n        className=\"form-select\"\r\n        aria-label=\"Default select example\"\r\n      >\r\n        {generatedList}\r\n      </select>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dropdown;\r\n","//Function to generate formatted date for input\r\nfunction getFormattedDate(date = Date.now()) {\r\n  const d = new Date(date);\r\n  let month = \"\" + (d.getMonth() + 1);\r\n  let day = \"\" + d.getDate();\r\n  let year = d.getFullYear();\r\n\r\n  if (month.length < 2) month = \"0\" + month;\r\n  if (day.length < 2) day = \"0\" + day;\r\n  return [year, month, day].join(\"-\");\r\n}\r\n//Function to generate formatted time for input\r\nfunction getFormattedTime(date = Date.now()) {\r\n  const d = new Date(date);\r\n  let minutes = \"\" + d.getMinutes();\r\n  let hours = \"\" + d.getHours();\r\n\r\n  if (minutes.length < 2) minutes = \"0\" + minutes;\r\n  if (hours.length < 2) hours = \"0\" + hours;\r\n  return [hours, minutes].join(\":\");\r\n}\r\n\r\nexport { getFormattedTime, getFormattedDate };\r\n","import React from \"react\";\r\nimport Dropdown from \"./Dropdown\";\r\nimport { getFormattedTime, getFormattedDate } from \"../helpers/timeFunctions\";\r\n\r\nclass Form extends React.Component {\r\n  areas = [];\r\n  machines = [];\r\n  operators = [\r\n    { label: \"Sinu Sen\", value: \"SS\" },\r\n    { label: \"Libi Varghese\", value: \"LV\" },\r\n  ];\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      maintenanceActivity: \"\",\r\n      currentArea: \"\",\r\n      currentMachine: \"\",\r\n      selectedDate: getFormattedDate(),\r\n      selectedTime: getFormattedTime(),\r\n      currentOperator: \"\",\r\n    };\r\n  }\r\n\r\n  getAreasFromList = () => {\r\n    let areas = [];\r\n    [\r\n      ...new Set(this.props.machinesList.map((item) => item.machine_location)),\r\n    ].forEach((value1, value2, set) => {\r\n      areas.push({ label: value1, value: value1 });\r\n    });\r\n    this.areas = areas;\r\n    this.setState({ currentArea: this.areas[0] });\r\n  };\r\n\r\n  getMachinesFromList = (area) => {\r\n    this.machines = this.props.machinesList\r\n      .filter((item) => item.machine_location == area)\r\n      .map(({ machine_name }) => {\r\n        return { label: machine_name, value: machine_name };\r\n      });\r\n    this.setState({ currentMachine: this.machines[0] });\r\n  };\r\n  getOperatorsFromList = () => {\r\n    this.operators = this.props.operatorsList.map(\r\n      ({ name, machine_operator }) => {\r\n        return { label: name, value: machine_operator };\r\n      }\r\n    );\r\n    this.setState({ currentOperator: this.operators[0] });\r\n  };\r\n  getEpoch = () => {\r\n    const dateTime = new Date(\r\n      `${this.state.selectedDate} ${this.state.selectedTime}`\r\n    );\r\n    return dateTime.getTime();\r\n  };\r\n\r\n  async componentDidMount() {\r\n    await this.props.onFormMount();\r\n    this.setState({ timeStep: \"900\" });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (\r\n      this.props.machinesList != prevProps.machinesList &&\r\n      this.props.machinesList\r\n    ) {\r\n      this.getAreasFromList();\r\n      this.getMachinesFromList(this.areas[0].value);\r\n    }\r\n    if (\r\n      this.props.operatorsList != prevProps.operatorsList &&\r\n      this.props.operatorsList\r\n    ) {\r\n      this.getOperatorsFromList();\r\n    }\r\n  }\r\n\r\n  handleAreaChange = (event, stateProperty) => {\r\n    this.setState({ [stateProperty]: event.target.value });\r\n    this.getMachinesFromList(event.target.value);\r\n  };\r\n  handleChange = (event, stateProperty) => {\r\n    this.setState({ [stateProperty]: event.target.value });\r\n  };\r\n\r\n  handleFormSubmission = (event) => {\r\n    this.getEpoch();\r\n    this.props.onFormSubmit({\r\n      area: this.state.currentArea.value,\r\n      machine: this.state.currentMachine.value,\r\n      epochMilliSeconds: this.getEpoch(),\r\n      operator: this.state.currentOperator.value,\r\n      activity: this.state.maintenanceActivity,\r\n    });\r\n    event.preventDefault();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.handleFormSubmission}>\r\n        <div className=\"row g-5\">\r\n          <div className=\"col-md-6\">\r\n            <Dropdown\r\n              label=\"Select an area\"\r\n              selected={this.state.currentArea}\r\n              options={this.areas}\r\n              onSelectedChange={(event) => {\r\n                this.handleAreaChange(event, \"currentArea\");\r\n              }}\r\n            />\r\n          </div>\r\n          <div className=\"col-md-6\">\r\n            <Dropdown\r\n              label=\"Select a machine\"\r\n              selected={this.state.currentMachine}\r\n              options={this.machines}\r\n              onSelectedChange={(event) => {\r\n                this.handleChange(event, \"currentMachine\");\r\n              }}\r\n            />\r\n          </div>\r\n          <div className=\"col-md-6\">\r\n            <label htmlFor=\"datePicker\" className=\"form-label\">\r\n              Select the date\r\n            </label>\r\n            <input\r\n              className=\"form-control\"\r\n              id=\"datePicker\"\r\n              type=\"date\"\r\n              value={this.state.selectedDate}\r\n              onChange={(event) => {\r\n                this.handleChange(event, \"selectedDate\");\r\n              }}\r\n            />\r\n          </div>\r\n          <div className=\"col-md-6\">\r\n            <label htmlFor=\"timePicker\" className=\"form-label\">\r\n              Select the time\r\n            </label>\r\n            <input\r\n              className=\"form-control\"\r\n              id=\"timePicker\"\r\n              type=\"time\"\r\n              value={this.state.selectedTime}\r\n              onChange={(event) => {\r\n                this.handleChange(event, \"selectedTime\");\r\n              }}\r\n            />\r\n          </div>\r\n          <div className=\"col-md-12\">\r\n            <Dropdown\r\n              label=\"Please input the initials\"\r\n              selected={this.state.currentOperator}\r\n              options={this.operators}\r\n              onSelectedChange={(event) => {\r\n                this.handleChange(event, \"currentOperator\");\r\n              }}\r\n            />\r\n          </div>\r\n          <div className=\"col-12\">\r\n            <label htmlFor=\"maintenanceActivities\" className=\"form-label\">\r\n              Maintenance Activities\r\n            </label>\r\n            <textarea\r\n              id=\"maintenanceActivities\"\r\n              className=\"form-control\"\r\n              placeholder=\"Enter activity\"\r\n              style={{ height: \"200px\" }}\r\n              value={this.state.maintenanceActivity}\r\n              onChange={(event) => {\r\n                this.handleChange(event, \"maintenanceActivity\");\r\n              }}\r\n            />\r\n          </div>\r\n          <button type=\"submit\" className=\"btn btn-primary\">\r\n            Submit\r\n          </button>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Form;\r\n","import React from \"react\";\r\nimport axios from \"axios\";\r\nimport Form from \"./components/Form\";\r\n\r\nclass App extends React.Component {\r\n  state = { error: false, machinesList: null, operatorsList: null };\r\n  fetchOperationData = async (endPoint) => {\r\n    try {\r\n      const response = await axios.get(`/activity-log/${endPoint}`);\r\n      return {\r\n        error: response.data.serverError,\r\n        data: response.data.data,\r\n      };\r\n    } catch (err) {\r\n      return { error: true };\r\n    }\r\n  };\r\n\r\n  fetchDropdownData = async () => {\r\n    const areaAndMachines = await this.fetchOperationData(\"area-and-machines\");\r\n    const operators = await this.fetchOperationData(\"operators\");\r\n\r\n    if (areaAndMachines.error || operators.error) {\r\n      this.setState({ error: true });\r\n      return;\r\n    }\r\n    this.setState({ machinesList: areaAndMachines.data });\r\n    this.setState({ operatorsList: operators.data });\r\n  };\r\n\r\n  postFormData = async (data) => {\r\n    console.log(data);\r\n    try {\r\n      await axios.post(`/activity-log/submit-form-data`, data);\r\n    } catch (err) {\r\n      console.log(err);\r\n      alert(\"Form submit error\");\r\n    }\r\n  };\r\n  renderForm() {\r\n    if (this.state.error) {\r\n      return \"Error\";\r\n    }\r\n    return (\r\n      <Form\r\n        onFormMount={this.fetchDropdownData}\r\n        machinesList={this.state.machinesList}\r\n        operatorsList={this.state.operatorsList}\r\n        onFormSubmit={this.postFormData}\r\n      />\r\n    );\r\n  }\r\n  render() {\r\n    return <div className=\"container\">{this.renderForm()}</div>;\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.querySelector(\"#root\"));\r\n"],"sourceRoot":""}